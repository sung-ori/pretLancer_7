<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>튜토리얼 | 신개념 번역 플랫폼 프릿랜서</title>
<script th:src = "@{/js/jquery.js}"></script>
<style>

	@font-face {
	    font-family: 'LINESeedKR-Bd';
	    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_11-01@1.0/LINESeedKR-Bd.woff2') format('woff2');
	    font-weight: 700;
	    font-style: normal;
	}
	
	* {
	    font-family: 'LINESeedKR-Bd';	
	}

	div {
		background-color: #EFF0F0;
		border-radius : 5px;

	}
	
	.outer {
		width : 1000px;
		height : 600px;
		border-radius : 5px;
		
	
	}
	
	.answer_input {
	
		width : 900px;
		height : 300px;
		
		border : solid 2px #EFF0F0;
		border-radius : 5px;
	
	}
	
	.answer_button{
	
		width : 100px;
		height : 35px;
		background-color:#2334DE;
		color : #FFFFFF;
		
		border : 0px;
		border-radius : 5px;
		
	}
	
	
</style>
<script type="text/javascript">

	$(document).ready(function() {
		$(".answer_button").click(function() {

			let examnum = document.getElementById('examnum').value;
			let memberid = document.getElementById('memberid').value;
			
			$.ajax({
				url : 'answer_check',
				type : 'post',
				data : {examnum : examnum, memberid : memberid},
				success : function(s) {
						$('#c_or_f').html(s);
				},
				error : function() {
						alert('에이젝스가 잘못되었습니다');
						return false;
				}
			})

			
			
		});

	});

	function check() {
		//my_answer : 번역 입력 창에 입력된 값
		let my_answer = document.getElementById('my_answer').value;
		
		//my_answer에 값이 입력되지 않은 경우 번역을 입력하라는 알림이 뜨며, 다음 창으로 넘어가지 않는다.
		if (my_answer == '' || my_answer.length == 0) {
			alert('번역을 입력하세요.');
			return false;
		}
		
		/* 에이젝스를 이용하여 맞았다 / 틀렸다 알림창 뜨게 한 다음에 넘어가게 하기. 
		1.	my_answer에 입력된 value 값을 받아서 컨트롤러에 보낸다 (html) 
		2.	컨트롤러에서 유사도 비교하는 메서드를 통해 similarity를 도출함 (컨트롤러)
		3.	유사도에 따라서 answer는 "정답입니다! 다음 문제로 이동합니다", "오답입니다. 다음 문제로 이동합니다."로 나뉨 (컨트롤러)
		4.	answer를 html로 보내서 알림에 뜨게 한다. (html) 
		
		let examnum = document.getElementById('examnum').value;
		
		$.ajax({
			url : 'answer_check',
			type : 'post',
			data : {my_answer : my_answer, examnum : examnum},
			success : function(s) {
					alert(s);
			},
			error : function() {
					alert('에이젝스가 잘못되었습니다')
			}
		})
		*/
		let tutorial = '[[${member.tutorial}]]';
		
		if (tutorial == 'Y') {
			alert('축하합니다! 튜토리얼을 통과하셨습니다. \n 확인 버튼을 누르시면 홈페이지로 이동합니다.');
			location.href = "http://localhost:8888/pretLancer";
		}
		
		return true;
	}
</script>

</head>
<body>
		
	<h1>튜토리얼</h1>
	<p th:text="${answer}"></p>
	<div class = "outer">
		<div> <!-- <div><h2>오늘의 문제</h2></div>--> <br><div><span id = "c_or_f"></span>맞은 문제 : <span th:text = "${member.tutorial_num}">0</span> / 50</div></div><hr>
		<!-- 문제 나오는 부분 -->
		<div>
			<!-- 문제 내용 -->
			<br>
			<br>
			<span th:text = "${question?.exam_content}">문제 내용 기본값</span>
			<br>
			<br>
			<br>
		</div>
		<hr>
		<!-- 답 입력하는 부분 -->
		<div>
		<form th:action = "@{/translated/tutorial}" method = "post" onsubmit = "return check()">
			<p>번역을 정확하게 입력해주세요.</p>
			<input type = "hidden" name = "memberid"  th:value="${#authentication.name}">
			<input type = "hidden" name = "examnum" th:value = "${question?.examnum}">
			<input type = "text" name = "my_answer" class = "answer_input" id = "my_answer"> <br>
			<input type = "submit" value = "제출" class = "answer_button">
		</form>
		</div>
	</div>
</body>
</html>