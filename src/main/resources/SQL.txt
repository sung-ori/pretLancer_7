// 커뮤니티 게시판

CREATE TABLE PRET_BOARD (
    BOARDNUM        NUMBER          NOT NULL DEFAULT 1 PRIMARY KEY, // 게시판 고유번호 시퀀스(PRET_BOARD_SEQ.NEXTVAL) 사용
    MEMBERID        VARCHAR2(20)    NOT NULL ,                      // 게시자 아이디 PRET_MEMBER의 MEMBERID참조
    BOARDCONTENT    VARCHAR2(2000)  NOT NULL,                       // 게시판 제목
    INPUTDATE       DATE    DEFAULT SYSDATE,                        // 작성 날짜 SYSDATE
    HITS            NUMBER  DEFAULT 0,                              // 조회수
    RECOMMEND       NUMBER  DEFAULT 0,                              // 추천수
    DECOMMEND       NUMBER  DEFAULT 0,                              // 비추천수
    POLICE          NUMBER  DEFAULT 0,                              // 신고 갯수


    FOREIGN KEY (MEMBERID) REFERENCES PRET_MEMBER (MEMBERID)        // MEMBERID 외래키 지정
);

// 게시판 시퀀스

CREATE SEQUENCE PRET_BOARD_SEQ
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    NOCYCLE;


// 커뮤니티 댓글 테이블

CREATE TABLE PRET_REPLY (
    REPLYNUM        NUMBER          NOT NULL    PRIMARY KEY,    // 댓글 번호  PK 시퀀스(PRET_REPLY_SEQ.NEXTVAL)이용
    BOARDNUM        NUMBER          NOT NULL,                   // 게시판 번호 FK
    MEMBERID        VARCHAR2(20)    NOT NULL,                   // 댓글 작성자 아이디
    REPLYCONTENT    VARCHAR2(500)   NOT NULL,                   // 댓글 내용
    REPLYDATE       DATE            NOT NULL    DEFAULT SYSDATE,// 댓글 작성 시간
    REPLYRECOMMEND  NUMBER          NOT NULL    DEFAULT 0,      // 댓글 추천 수

    FOREIGN KEY (BOARDNUM) REFERENCES PRET_BOARD    (BOARDNUM), // 외래키 지정
    FOREIGN KEY (MEMBERID) REFERENCES PRET_MEMBER   (MEMBERID)  // 외래키 지정
);

// 댓글 시퀀스

CREATE SEQUENCE PRET_REPLY_SEQ
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    NOCYCLE;

// 마이프로필 테이블

CREATE TABLE pret_member_profile (
    MEMBERID        VARCHAR2(20)    NOT NULL,                   // 사용자 아이디        PK, FK
    MEMBERNAME      VARCHAR2(20)    NOT NULL,                   // 사용자 이름          FK
    MEMBERNICK      VARCHAR2(50)    NOT NULL DEFAULT 'NO-NAME', // 사용자 닉네임
    MEM_EX          NUMBER          NOT NULL DEFAULT 0,         // 사용자 경험치(신뢰도)  FK
    MEM_LEVEL       CHAR(1)         NOT NULL DEFAULT 'D',       // 사용자 레벨          FK
    MEMBERLANG      VARCHAR2(30),                               // 사용자 언어 정보
    PROFILECOMMENT  VARCHAR2(2000),                             // 프로필 문구
    ORIGINPHOTO     VARCHAR2(2000),                             // 사진 원본 파일
    SAVEDPHOTH      VARCHAR2(2000),                             // 저장된 사진 파일

    FOREIGN KEY (MEMBERID)      REFERENCES PRET_MEMBER   (MEMBERID),  // MEMBERID 외래키 지정
    FOREIGN KEY (MEMBERNAME)    REFERENCES PRET_MEMBER   (MEMBERNAME),  // MEMBERNAME 외래키 지정
    FOREIGN KEY (MEM_EX)        REFERENCES PRET_MEMBER   (MEM_EX),  // MEM_EX 외래키 지정
    FOREIGN KEY (MEM_LEVEL)     REFERENCES PRET_MEMBER   (MEM_LEVEL)  // MEM_LEVEL 외래키 지정
);

    //CONSTRAINT chk_level CHECK (level IN ('D', 'C', 'B', 'A'))  // 등급 제약조건




































































































































// 멤버 테이블

CREATE TABLE pret_member (
	memberid	varchar2(20)	NOT NULL PRIMARY KEY,
	memberpw	varchar2(100)	NOT NULL,
	membername	varchar2(20),
	membermail  varchar2(50),
	membernick	varchar(50)	    DEFAULT 'no-name',
	mem_ex	    number  	    DEFAULT 0,
	mem_level	varchar2(10)	DEFAULT 'D' check (mem_level in ('D','C','B','A')),
	enabled		number(1)       default 1 check (enabled in (0, 1)), -- 1이면 사용가능,  2는 사용불가능
	role_name	varchar2(20)    default 'ROLE_USER' check (role_name in ('ROLE_USER', 'ROLE_ADMIN')),
	role_scale	varchar2(20)	DEFAULT 'ROLE_MINOR' check (role_scale in ('ROLE_MINOR', 'ROLE_MAJOR')), 
	point	    number	        DEFAULT 0,
	cash	    number	        DEFAULT 0,
	tutorial	varchar2(2) 	DEFAULT 'N', -- tutorial_num이 50개면 Y로 바꿈
	tutorial_num	number  	DEFAULT 0,   -- 50개를 하면 prit_member 테이블에서 tutorial을 Y로 바꿈
	memberlang	    varchar2(30)
);


// 연습문제 테이블

CREATE TABLE pret_examvalue (
	examnum	        number	        DEFAULT 1,
	exam_content	varchar2(1000)	NOT NULL,
	exam_answer	    varchar2(1000)	NOT NULL
);

CREATE TABLE pret_exam (
	memberid	varchar2(20)	references pret_member(memberid), -- 문제를 풀면 문제 번호와 아이디 추가
	examnum	    number                                            -- 문제를 중복해서 풀 수 없게 함
);


// 신고 게시판

CREATE TABLE pret_vanboard (
	boardnum	    number	NOT NULL,
	memberid	    varchar2(20)	NOT NULL,
	boardcontent	varchar2(3000)	NOT NULL,
	boardtitle  	varchar2(500)	NOT NULL,
	inputdate	    date
);


// 단문의뢰 테이블

CREATE TABLE pret_requests (
	requestsnum	        number	            DEFAULT 1 ,
	memberid	        varchar2(20)	    NOT NULL REFERENCES pret_member(memberid),
	memberid2   	    varchar2(20)    	REFERENCES pret_member(memberid),
	requestscontent	    varchar2(500),
	translatedscontent	varchar2(500),
	requestscondition	varchar2(2)	    DEFAULT 'N' check(requestscondition in ('N','T','E','Y')),	
    -- 번역X-N , 번역중-T, 평가대기중-E, 완료-Y'
	inputdate	        date        	DEFAULT sysdate,
	enddate 	        date	        DEFAULT sysdate+3,
	cash	            number	        DEFAULT 100,
	commentsr       	varchar2(250), -- 의뢰자 비고란
	startlang       	varchar2(30)	NOT NULL,
	endlang	            varchar2(30)	NOT NULL
);

create sequence pret_requests_seq; -- pret_requests requestsnum의 시퀀스


// 중문의뢰 테이블

CREATE TABLE pret_requestm (
	requestmnum	        number	            DEFAULT 1 ,
	memberid	        varchar2(20)	    NOT NULL REFERENCES pret_member(memberid),
	memberid2   	    varchar2(20)    	REFERENCES pret_member(memberid),
	requestmcontent	    varchar2(500),
	translatedmcontent	varchar2(500),
	requestmcondition	varchar2(2)	    DEFAULT 'N' check(requestmcondition in ('N','T','E','Y')),	
    -- 번역X-N , 번역중-T, 평가대기중-E, 완료-Y'
	inputdate	        date        	DEFAULT sysdate,
	enddate 	        date	        DEFAULT sysdate+3,
	cash	            number	        DEFAULT 100,
	commentmr       	varchar2(250), -- 의뢰자 비고란
	startlang       	varchar2(30)	NOT NULL,
	endlang	            varchar2(30)	NOT NULL
);

create sequence pret_requestm_seq; -- pret_requestm requestmnum의 시퀀스



// 장문의뢰 테이블

CREATE TABLE pret_requestl (
	requestLNum	        number	        DEFAULT 1,
	memberid	        varchar2(20)	NOT NULL REFERENCES pret_member(memberid),
	memberid2	        varchar2(20)	REFERENCES pret_member(memberid),
	category	        varchar2(50),
	requestlcondition	varchar2(2)	DEFAULT 'N' CHECK (requestlcondition in ('N', 'Y')),
	inputdate	        date	DEFAULT sysdate,
	enddate	            date	DEFAULT sysdate+10,
	workdate	        date,
	cash            	number,
	originRFile	        varchar2(100),
	savedRFile      	varchar2(100),
	origintfile	        varchar2(100),
	savedtfile	        varchar2(100),
	commentlr       	varchar2(2000),
	commentpage	        varchar2(100),
	startlang	        varchar2(30)	NOT NULL,
	endlang	            varchar2(30)	NOT NULL
);

create sequence pret_requestl_seq; -- pret_requestl requestmnum의 시퀀스